{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Profile(){const[user,setUser]=useState(null);const navigate=useNavigate();useEffect(()=>{// Check if token exists in localStorage\nconst token=localStorage.getItem(\"token\");if(!token){navigate(\"/login\");// Redirect to login if not logged in\n}else{// Fetch user data using token if logged in\nconst fetchUserData=async()=>{try{const response=await fetch(\"http://localhost:5000/api/auth/user\",{method:\"GET\",headers:{\"Authorization\":\"Bearer \".concat(token)}});const data=await response.json();if(response.ok){setUser(data);}else{navigate(\"/login\");}}catch(err){console.log(\"Error fetching user data\",err);}};fetchUserData();}},[navigate]);const handleLogout=()=>{localStorage.removeItem(\"token\");// Remove token on logout\nnavigate(\"/login\");// Redirect to login page\n};return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.username,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",user.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsxs","_jsxs","jsx","_jsx","Profile","user","setUser","navigate","token","localStorage","getItem","fetchUserData","response","fetch","method","headers","concat","data","json","ok","err","console","log","handleLogout","removeItem","className","children","username","email","onClick"],"sources":["C:/Users/SAM/Desktop/MCA/SEM 1/Web Technology/FootFolio---A-Shoes-Ecommerce-Website/backend/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction Profile() {\r\n    const [user, setUser] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        // Check if token exists in localStorage\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n            navigate(\"/login\"); // Redirect to login if not logged in\r\n        } else {\r\n            // Fetch user data using token if logged in\r\n            const fetchUserData = async () => {\r\n                try {\r\n                    const response = await fetch(\"http://localhost:5000/api/auth/user\", {\r\n                        method: \"GET\",\r\n                        headers: {\r\n                            \"Authorization\": `Bearer ${token}`,\r\n                        },\r\n                    });\r\n                    const data = await response.json();\r\n                    if (response.ok) {\r\n                        setUser(data);\r\n                    } else {\r\n                        navigate(\"/login\");\r\n                    }\r\n                } catch (err) {\r\n                    console.log(\"Error fetching user data\", err);\r\n                }\r\n            };\r\n            fetchUserData();\r\n        }\r\n    }, [navigate]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem(\"token\"); // Remove token on logout\r\n        navigate(\"/login\"); // Redirect to login page\r\n    };\r\n\r\n    return (\r\n        <div className=\"profile-container\">\r\n            {user ? (\r\n                <div>\r\n                    <h2>Welcome, {user.username}!</h2>\r\n                    <p>Email: {user.email}</p>\r\n                    <button onClick={handleLogout}>Logout</button>\r\n                </div>\r\n            ) : (\r\n                <div>Loading...</div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAE/C,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACf,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAAU,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAU,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACRD,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACxB,CAAC,IAAM,CACH;AACA,KAAM,CAAAI,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,qCAAqC,CAAE,CAChEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,eAAe,WAAAC,MAAA,CAAYR,KAAK,CACpC,CACJ,CAAC,CAAC,CACF,KAAM,CAAAS,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClC,GAAIN,QAAQ,CAACO,EAAE,CAAE,CACbb,OAAO,CAACW,IAAI,CAAC,CACjB,CAAC,IAAM,CACHV,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CAAE,MAAOa,GAAG,CAAE,CACVC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEF,GAAG,CAAC,CAChD,CACJ,CAAC,CACDT,aAAa,CAAC,CAAC,CACnB,CACJ,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAgB,YAAY,CAAGA,CAAA,GAAM,CACvBd,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC,CAAE;AAClCjB,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACxB,CAAC,CAED,mBACIJ,IAAA,QAAKsB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC7BrB,IAAI,cACDJ,KAAA,QAAAyB,QAAA,eACIzB,KAAA,OAAAyB,QAAA,EAAI,WAAS,CAACrB,IAAI,CAACsB,QAAQ,CAAC,GAAC,EAAI,CAAC,cAClC1B,KAAA,MAAAyB,QAAA,EAAG,SAAO,CAACrB,IAAI,CAACuB,KAAK,EAAI,CAAC,cAC1BzB,IAAA,WAAQ0B,OAAO,CAAEN,YAAa,CAAAG,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC7C,CAAC,cAENvB,IAAA,QAAAuB,QAAA,CAAK,YAAU,CAAK,CACvB,CACA,CAAC,CAEd,CAEA,cAAe,CAAAtB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}